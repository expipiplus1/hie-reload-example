2020-03-11 10:37:22.044545805 [ThreadId 4] - run entered for hie-wrapper(hie) Version 1.1 x86_64 ghc-8.8.2
2020-03-11 10:37:22.044711704 [ThreadId 4] - Current directory:/home/j/projects/bugs/reload
2020-03-11 10:37:22.044801693 [ThreadId 4] - Operating system:linux
2020-03-11 10:37:22.044843255 [ThreadId 4] - args:["-l","/tmp/hie.log","--lsp","-d","--vomit"]
2020-03-11 10:37:22.044958409 [ThreadId 4] - Found "/home/j/projects/bugs/reload/hie.yaml" for "/home/j/projects/bugs/reload/File.hs"
2020-03-11 10:37:22.045190729 [ThreadId 4] - Module "/home/j/projects/bugs/reload/File.hs" is loaded by Cradle: Cradle {cradleRootDir = "/home/j/projects/bugs/reload", cradleOptsProg = CradleAction: Cabal}
2020-03-11 10:37:22.04523724 [ThreadId 4] - Cradle directory:/home/j/projects/bugs/reload
2020-03-11 10:37:22.045760905 [ThreadId 4] - Executing GHC on path with args: --numeric-version
2020-03-11 10:37:22.073867977 [ThreadId 4] - GHC Output: "Just "8.8.2""
2020-03-11 10:37:22.073940349 [ThreadId 4] - Project GHC version:8.8.2
2020-03-11 10:37:22.073961404 [ThreadId 4] - hie exe candidates :["hie-8.8.2","hie-8.8","hie"]
2020-03-11 10:37:22.074472372 [ThreadId 4] - found hie exe at:/nix/store/fxj733gk32byhqfcm9aal4z905lpmiwp-haskell-ide-engine-combined/libexec/bin/hie-8.8.2
2020-03-11 10:37:22.074499993 [ThreadId 4] - args:["-l","/tmp/hie.log","--lsp","-d","--vomit"]
2020-03-11 10:37:22.074518967 [ThreadId 4] - launching ....



2020-03-11 10:37:22.357181197 [ThreadId 4] - Run entered for HIE(hie-8.8.2) Version 1.1 x86_64 ghc-8.8.2
2020-03-11 10:37:22.357349236 [ThreadId 4] - Operating as a LSP server on stdio
2020-03-11 10:37:22.357380451 [ThreadId 4] - Current directory:/home/j/projects/bugs/reload
2020-03-11 10:37:22.357407807 [ThreadId 4] - Operating system:linux
2020-03-11 10:37:22.357432565 [ThreadId 4] - args:["-l","/tmp/hie.log","--lsp","-d","--vomit"]
2020-03-11 10:37:22.35745887 [ThreadId 4] - Enabling verbose mode for hie-bios. This option currently doesn't do anything.
2020-03-11 10:37:22.357566558 [ThreadId 4] - 




haskell-lsp:Starting up server ...
2020-03-11 10:37:22.357827391 [ThreadId 4] - ---> {"jsonrpc":"2.0","id":0,"method":"initialize","params":{"processId":17221,"rootPath":"/home/j/projects/bugs/reload","rootUri":"file:///home/j/projects/bugs/reload","capabilities":{"workspace":{"applyEdit":true,"workspaceEdit":{"documentChanges":true,"resourceOperations":["create","rename","delete"],"failureHandling":"textOnlyTransactional"},"didChangeConfiguration":{"dynamicRegistration":true},"didChangeWatchedFiles":{"dynamicRegistration":true},"symbol":{"dynamicRegistration":true,"symbolKind":{"valueSet":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]}},"executeCommand":{"dynamicRegistration":true},"configuration":true,"workspaceFolders":true},"textDocument":{"publishDiagnostics":{"relatedInformation":true,"versionSupport":false},"synchronization":{"dynamicRegistration":true,"willSave":true,"willSaveWaitUntil":true,"didSave":true},"completion":{"dynamicRegistration":true,"contextSupport":true,"completionItem":{"snippetSupport":true,"commitCharactersSupport":true,"documentationFormat":["markdown","plaintext"],"deprecatedSupport":true,"preselectSupport":true},"completionItemKind":{"valueSet":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]}},"hover":{"dynamicRegistration":true,"contentFormat":["markdown","plaintext"]},"signatureHelp":{"dynamicRegistration":true,"signatureInformation":{"documentationFormat":["markdown","plaintext"],"parameterInformation":{"labelOffsetSupport":true}}},"definition":{"dynamicRegistration":true},"references":{"dynamicRegistration":true},"documentHighlight":{"dynamicRegistration":true},"documentSymbol":{"dynamicRegistration":true,"symbolKind":{"valueSet":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]},"hierarchicalDocumentSymbolSupport":true},"codeAction":{"dynamicRegistration":true,"isPreferredSupport":true,"codeActionLiteralSupport":{"codeActionKind":{"valueSet":["","quickfix","refactor","refactor.extract","refactor.inline","refactor.rewrite","source","source.organizeImports"]}}},"codeLens":{"dynamicRegistration":true},"formatting":{"dynamicRegistration":true},"rangeFormatting":{"dynamicRegistration":true},"onTypeFormatting":{"dynamicRegistration":true},"rename":{"dynamicRegistration":true,"prepareSupport":true},"documentLink":{"dynamicRegistration":true,"tooltipSupport":true},"typeDefinition":{"dynamicRegistration":true},"implementation":{"dynamicRegistration":true},"declaration":{"dynamicRegistration":true},"colorProvider":{"dynamicRegistration":true},"foldingRange":{"dynamicRegistration":true,"rangeLimit":5000,"lineFoldingOnly":true},"selectionRange":{"dynamicRegistration":true}},"window":{"workDoneProgress":true}},"trace":"off","workspaceFolders":[{"uri":"file:///home/j/projects/bugs/reload","name":"reload"}]}}
2020-03-11 10:37:22.358544494 [ThreadId 4] - haskell-lsp:initializeRequestHandler: setting current dir to project root:/home/j/projects/bugs/reload
2020-03-11 10:37:22.35863129 [ThreadId 4] - Dummy Cradle file result: /home/j/projects/bugs/reload/File.hs
2020-03-11 10:37:22.35869302 [ThreadId 4] - Found "/home/j/projects/bugs/reload/hie.yaml" for "/home/j/projects/bugs/reload/File.hs"
2020-03-11 10:37:22.358802644 [ThreadId 4] - Module "/home/j/projects/bugs/reload/File.hs" is loaded by Cradle: Cradle {cradleRootDir = "/home/j/projects/bugs/reload", cradleOptsProg = CradleAction: Cabal}
2020-03-11 10:37:22.359135015 [ThreadId 4] - Executing GHC on path with args: --numeric-version
2020-03-11 10:37:22.38679585 [ThreadId 4] - GHC Output: "Just "8.8.2""
2020-03-11 10:37:22.400520556 [ThreadId 9] - Executing GHC on path with args: --print-libdir
2020-03-11 10:37:22.400869384 [ThreadId 10] - ****** reactor: top of loop
2020-03-11 10:37:22.401201668 [ThreadId 5] - <--2--{"result":{"capabilities":{"typeDefinitionProvider":true,"foldingRangeProvider":false,"textDocumentSync":{"openClose":true,"change":2,"willSave":false,"willSaveWaitUntil":false,"save":{"includeText":false}},"workspace":{},"implementationProvider":true,"documentRangeFormattingProvider":true,"documentHighlightProvider":true,"executeCommandProvider":{"commands":["17296:applyrefact:applyOne","17296:applyrefact:applyAll","17296:generic:type","17296:ghcmod:check","17296:ghcmod:type","17296:ghcmod:casesplit","17296:hsimport:import","17296:package:add","17296:pragmas:addPragma"]},"renameProvider":false,"colorProvider":false,"definitionProvider":true,"hoverProvider":true,"codeActionProvider":true,"completionProvider":{"triggerCharacters":["."],"resolveProvider":true},"documentSymbolProvider":true,"documentFormattingProvider":true,"referencesProvider":true}},"jsonrpc":"2.0","id":0}
2020-03-11 10:37:22.402691816 [ThreadId 4] - ---> {"jsonrpc":"2.0","method":"initialized","params":{}}
2020-03-11 10:37:22.402807337 [ThreadId 10] - ****** reactor: got message number:0
2020-03-11 10:37:22.402862232 [ThreadId 10] - ****** reactor: processing Initialized Notification
2020-03-11 10:37:22.402940705 [ThreadId 10] - ****** reactor: top of loop
2020-03-11 10:37:22.40305551 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"type":4,"message":"Using hie version: Version 1.1 x86_64 ghc-8.8.2"},"method":"window/logMessage"}
2020-03-11 10:37:22.403876457 [ThreadId 4] - ---> {"jsonrpc":"2.0","method":"workspace/didChangeConfiguration","params":{"settings":{"languageServerHaskell":{"hlintOn":true,"maxNumberOfProblems":100,"diagnosticsOnChange":true,"liquidOn":false,"completionSnippetsOn":true,"formatOnImportOn":true,"formattingProvider":"brittany","hieExecutablePath":"/nix/store/3iaff764zflwc3f5b3hnzn9nfa5phcbd-nix-shell-hie","useCustomHieWrapper":false,"useCustomHieWrapperPath":"","noLspParam":false,"showTypeForSelection":{"onHover":true,"command":{"location":"dropdown"}},"trace":{"server":"verbose"},"logFile":"","enableHIE":true}}}}
2020-03-11 10:37:22.404028308 [ThreadId 10] - ****** reactor: got message number:1
2020-03-11 10:37:22.404064656 [ThreadId 10] - reactor:didChangeConfiguration notification:NotificationMessage {_jsonrpc = "2.0", _method = WorkspaceDidChangeConfiguration, _params = DidChangeConfigurationParams {_settings = Object (fromList [("languageServerHaskell",Object (fromList [("useCustomHieWrapper",Bool False),("useCustomHieWrapperPath",String ""),("logFile",String ""),("hlintOn",Bool True),("formatOnImportOn",Bool True),("noLspParam",Bool False),("hieExecutablePath",String "/nix/store/3iaff764zflwc3f5b3hnzn9nfa5phcbd-nix-shell-hie"),("enableHIE",Bool True),("liquidOn",Bool False),("showTypeForSelection",Object (fromList [("onHover",Bool True),("command",Object (fromList [("location",String "dropdown")]))])),("diagnosticsOnChange",Bool True),("completionSnippetsOn",Bool True),("maxNumberOfProblems",Number 100.0),("formattingProvider",String "brittany"),("trace",Object (fromList [("server",String "verbose")]))]))])}}
2020-03-11 10:37:22.404167843 [ThreadId 10] - reactor:didChangeConfiguration diagsOn:True
2020-03-11 10:37:22.404194397 [ThreadId 10] - ****** reactor: top of loop
2020-03-11 10:37:22.404401596 [ThreadId 4] - ---> {"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///home/j/projects/bugs/reload/src/Foo.hs","languageId":"haskell","version":1,"text":"module Foo\n  where\n\nimport Bar\n\nfoo = ()\n"}}}
2020-03-11 10:37:22.40449636 [ThreadId 10] - ****** reactor: got message number:2
2020-03-11 10:37:22.40454729 [ThreadId 10] - ****** reactor: processing NotDidOpenTextDocument
2020-03-11 10:37:22.404576406 [ThreadId 10] - requestDiagnostics: no diagFunc for:DiagnosticOnOpen
2020-03-11 10:37:22.404615284 [ThreadId 10] - ****** reactor: top of loop
2020-03-11 10:37:22.428963009 [ThreadId 9] - GHC Output: "Just "/nix/store/r1hbgdmkj041vx87ds5px65lnbdvhyj7-ghc-8.8.2/lib/ghc-8.8.2""
2020-03-11 10:37:22.430907642 [ThreadId 15] - ghcDispatcher: top of loop
2020-03-11 10:37:22.430991623 [ThreadId 15] - ghcDispatcher:got request 0 with id: Nothing
2020-03-11 10:37:22.431047084 [ThreadId 15] - ghcDispatcher: top of loop
2020-03-11 10:37:22.431070284 [ThreadId 15] - ghcDispatcher:got request 2 with id: Nothing
2020-03-11 10:37:22.431098459 [ThreadId 15] - ghcDispatcher:Processing request as version matches
2020-03-11 10:37:22.431170889 [ThreadId 15] - New cradle: /home/j/projects/bugs/reload/src/Foo.hs
2020-03-11 10:37:22.431236548 [ThreadId 15] - Found "/home/j/projects/bugs/reload/hie.yaml" for "/home/j/projects/bugs/reload/src/Foo.hs"
2020-03-11 10:37:22.43131844 [ThreadId 15] - Module "/home/j/projects/bugs/reload/src/Foo.hs" is loaded by Cradle: Cradle {cradleRootDir = "/home/j/projects/bugs/reload", cradleOptsProg = CradleAction: Cabal}
2020-03-11 10:37:22.431350951 [ThreadId 15] - Found cradle: Cradle {cradleRootDir = "/home/j/projects/bugs/reload", cradleOptsProg = CradleAction: Cabal}
2020-03-11 10:37:22.431450202 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"type":2,"message":"No hoogle db found. Check the README for instructions to generate one"},"method":"window/showMessage"}
2020-03-11 10:37:22.431506449 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"token":0},"method":"window/workDoneProgress/create","id":0}
2020-03-11 10:37:22.431555625 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"begin","cancellable":false,"title":"Initializing Cabal project","percentage":0},"token":0},"method":"$/progress"}
2020-03-11 10:37:22.431381231 [ThreadId 16] - ideDispatcher: top of loop
2020-03-11 10:37:22.432794822 [ThreadId 4] - ---> {"jsonrpc":"2.0","id":0,"result":null}
2020-03-11 10:37:22.432849572 [ThreadId 4] - haskell-lsp:Got reply message:"{\"jsonrpc\":\"2.0\",\"id\":0,\"result\":null}"
2020-03-11 10:37:22.432990208 [ThreadId 10] - ****** reactor: got message number:3
2020-03-11 10:37:22.43302156 [ThreadId 10] - reactor:got RspFromClient:ResponseMessage {_jsonrpc = "2.0", _id = IdRspInt 0, _result = Just Null, _error = Nothing}
2020-03-11 10:37:22.433054534 [ThreadId 10] - ****** reactor: top of loop
2020-03-11 10:37:22.704672829 [ThreadId 23] - Warning: The package list for 'hackage.haskell.org' does not exist. Run 'cabal
2020-03-11 10:37:22.70474384 [ThreadId 23] - update' to download it.
2020-03-11 10:37:22.705459109 [ThreadId 25] - Resolving dependencies...
2020-03-11 10:37:22.717117613 [ThreadId 25] - Build profile: -w ghc-8.8.2 -O1
2020-03-11 10:37:22.717176825 [ThreadId 25] - In order, the following will be built (use -v for more details):
2020-03-11 10:37:22.717201936 [ThreadId 25] -  - reload-0.0.0 (lib) (configuration changed)
2020-03-11 10:37:22.721180953 [ThreadId 25] - Configuring library for reload-0.0.0..
2020-03-11 10:37:23.172421557 [ThreadId 25] - Preprocessing library for reload-0.0.0..
2020-03-11 10:37:23.259794731 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"report","percentage":0.3333333333333333,"message":"Bar"},"token":0},"method":"$/progress"}
2020-03-11 10:37:23.259886651 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"report","percentage":0.6666666666666666,"message":"Foo"},"token":0},"method":"$/progress"}
2020-03-11 10:37:23.262574056 [ThreadId 19] - Modules in the cradle: ["/home/j/projects/bugs/reload/src/Bar.hs","/home/j/projects/bugs/reload/src/Foo.hs","/home/j/projects/bugs/reload/dist-newstyle/build/x86_64-linux/ghc-8.8.2/reload-0.0.0/build/autogen/Paths_reload.hs"]
2020-03-11 10:37:23.262699636 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"report","percentage":1,"message":"Paths_reload"},"token":0},"method":"$/progress"}
2020-03-11 10:37:23.262750465 [ThreadId 19] - Cradle set succesfully
2020-03-11 10:37:23.262919637 [ThreadId 19] - haskell-lsp:persistFileVFS: Writing virtual file: uri = NormalizedUri "file:///home/j/projects/bugs/reload/src/Foo.hs", virtual file = "/run/user/1000/haskell-lsp17296/Foo.hs-00000--4428135201160501691.hs"
2020-03-11 10:37:23.38387507 [ThreadId 15] - ghcDispatcher: top of loop
2020-03-11 10:37:23.383938703 [ThreadId 15] - ghcDispatcher:got request 2 with id: Nothing
2020-03-11 10:37:23.383964486 [ThreadId 15] - ghcDispatcher:Processing request as version matches
2020-03-11 10:37:23.384040386 [ThreadId 15] - Reusing cradle
2020-03-11 10:37:23.384082263 [ThreadId 15] - setTypecheckedModule: before ghc-mod
2020-03-11 10:37:23.384111372 [ThreadId 15] - Loading file
2020-03-11 10:37:23.384245262 [ThreadId 15] - setTypecheckedModule: before ghc-mod
2020-03-11 10:37:23.384272144 [ThreadId 15] - Loading file
2020-03-11 10:37:23.385812562 [ThreadId 48] - setTargets: [("/home/j/projects/bugs/reload/src/Foo.hs","/run/user/1000/haskell-lsp17296/Foo.hs-00000--4428135201160501691.hs")]
2020-03-11 10:37:23.386160273 [ThreadId 48] - modGraph: [ModLocation {ml_hs_file = Just "/home/j/projects/bugs/reload/src/Bar.hs", ml_hi_file = "/home/j/.cache/hie-bios/d683979caa1268a99179ce7efe7042c9ecfe996c/Bar.hi", ml_obj_file = "/home/j/projects/bugs/reload/dist-newstyle/build/x86_64-linux/ghc-8.8.2/reload-0.0.0/build/Bar.o", ml_hie_file = "/home/j/projects/bugs/reload/dist-newstyle/build/x86_64-linux/ghc-8.8.2/reload-0.0.0/build/Bar.hie"},ModLocation {ml_hs_file = Just "/run/user/1000/haskell-lsp17296/Foo.hs-00000--4428135201160501691.hs", ml_hi_file = "/home/j/.cache/hie-bios/d683979caa1268a99179ce7efe7042c9ecfe996c/Foo.hi", ml_obj_file = "/home/j/projects/bugs/reload/dist-newstyle/build/x86_64-linux/ghc-8.8.2/reload-0.0.0/build/Foo.o", ml_hie_file = "/home/j/projects/bugs/reload/dist-newstyle/build/x86_64-linux/ghc-8.8.2/reload-0.0.0/build/Foo.hie"}]
2020-03-11 10:37:23.386662081 [ThreadId 48] - init-plugins(loaded):0
2020-03-11 10:37:23.38669441 [ThreadId 48] - init-plugins(specified):0
2020-03-11 10:37:23.387378022 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"end"},"token":0},"method":"$/progress"}
2020-03-11 10:37:23.406639622 [ThreadId 48] - loaded /home/j/projects/bugs/reload/src/Foo.hs - /run/user/1000/haskell-lsp17296/Foo.hs-00000--4428135201160501691.hs
2020-03-11 10:37:23.406724191 [ThreadId 48] - Typechecked modules for: Just "/run/user/1000/haskell-lsp17296/Foo.hs-00000--4428135201160501691.hs"

2020-03-11 10:37:23.427945931 [ThreadId 15] - File, loaded
2020-03-11 10:37:23.428071022 [ThreadId 15] - setTypecheckedModule: after ghc-mod
2020-03-11 10:37:23.428121029 [ThreadId 15] - Diags: fromList []
2020-03-11 10:37:23.428173061 [ThreadId 15] - setTypecheckedModule: Did get typechecked module for: "/home/j/projects/bugs/reload/src/Foo.hs"
2020-03-11 10:37:23.428377734 [ThreadId 15] - setTypecheckedModule: done
2020-03-11 10:37:23.428701041 [ThreadId 15] - ghcDispatcher: top of loop
2020-03-11 10:37:23.450588576 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"uri":"file:///home/j/projects/bugs/reload/src/Foo.hs","diagnostics":[]},"method":"textDocument/publishDiagnostics"}
2020-03-11 10:37:23.450677439 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"token":1},"method":"window/workDoneProgress/create","id":1}
2020-03-11 10:37:23.450719953 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"begin","cancellable":false,"title":"loading","percentage":0},"token":1},"method":"$/progress"}
2020-03-11 10:37:23.450766719 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"report","percentage":0.5,"message":"Bar"},"token":1},"method":"$/progress"}
2020-03-11 10:37:23.450806614 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"report","percentage":1,"message":"Foo"},"token":1},"method":"$/progress"}
2020-03-11 10:37:23.450841632 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"end"},"token":1},"method":"$/progress"}
2020-03-11 10:37:23.450878924 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"uri":"file:///home/j/projects/bugs/reload/src/Foo.hs","diagnostics":[]},"method":"textDocument/publishDiagnostics"}
2020-03-11 10:37:23.451596341 [ThreadId 4] - ---> {"jsonrpc":"2.0","id":1,"result":null}
2020-03-11 10:37:23.451647039 [ThreadId 4] - haskell-lsp:Got reply message:"{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":null}"
2020-03-11 10:37:23.451696848 [ThreadId 10] - ****** reactor: got message number:4
2020-03-11 10:37:23.451722912 [ThreadId 10] - reactor:got RspFromClient:ResponseMessage {_jsonrpc = "2.0", _id = IdRspInt 1, _result = Just Null, _error = Nothing}
2020-03-11 10:37:23.451749859 [ThreadId 10] - ****** reactor: top of loop



<MADE EDIT TO Foo.hs>




2020-03-11 10:37:31.390938307 [ThreadId 4] - ---> {"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"version":2,"uri":"file:///home/j/projects/bugs/reload/src/Foo.hs"},"contentChanges":[{"range":{"start":{"line":5,"character":8},"end":{"line":5,"character":8}},"rangeLength":0,"text":" "}]}}
2020-03-11 10:37:31.391207237 [ThreadId 10] - ****** reactor: got message number:5
2020-03-11 10:37:31.391247092 [ThreadId 10] - ****** reactor: processing NotDidChangeTextDocument
2020-03-11 10:37:31.39127699 [ThreadId 10] - ****** reactor: top of loop
2020-03-11 10:37:31.391300551 [ThreadId 15] - ghcDispatcher:got request 5 with id: Nothing
2020-03-11 10:37:31.391379199 [ThreadId 15] - Reusing cradle
2020-03-11 10:37:31.391487162 [ThreadId 15] - ghcDispatcher: top of loop
2020-03-11 10:37:31.639692798 [ThreadId 4] - ---> {"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"version":3,"uri":"file:///home/j/projects/bugs/reload/src/Foo.hs"},"contentChanges":[{"range":{"start":{"line":5,"character":9},"end":{"line":5,"character":9}},"rangeLength":0,"text":"1"}]}}
2020-03-11 10:37:31.640337715 [ThreadId 10] - ****** reactor: got message number:6
2020-03-11 10:37:31.640382514 [ThreadId 10] - ****** reactor: processing NotDidChangeTextDocument
2020-03-11 10:37:31.640411537 [ThreadId 10] - ****** reactor: top of loop
2020-03-11 10:37:31.64047099 [ThreadId 15] - ghcDispatcher:got request 6 with id: Nothing
2020-03-11 10:37:31.64059237 [ThreadId 15] - Reusing cradle
2020-03-11 10:37:31.640704061 [ThreadId 15] - ghcDispatcher: top of loop
2020-03-11 10:37:31.700704731 [ThreadId 4] - ---> {"jsonrpc":"2.0","id":1,"method":"textDocument/completion","params":{"textDocument":{"uri":"file:///home/j/projects/bugs/reload/src/Foo.hs"},"position":{"line":5,"character":10},"context":{"triggerKind":1}}}
2020-03-11 10:37:31.700960188 [ThreadId 10] - ****** reactor: got message number:7
2020-03-11 10:37:31.701001135 [ThreadId 10] - reactor:got CompletionRequest:RequestMessage {_jsonrpc = "2.0", _id = IdInt 1, _method = TextDocumentCompletion, _params = CompletionParams {_textDocument = TextDocumentIdentifier {_uri = Uri {getUri = "file:///home/j/projects/bugs/reload/src/Foo.hs"}}, _position = Position {_line = 5, _character = 10}, _context = Just (CompletionContext {_triggerKind = CtInvoked, _triggerCharacter = Nothing}), _workDoneToken = Nothing}}
2020-03-11 10:37:31.701146745 [ThreadId 10] - ****** reactor: top of loop
2020-03-11 10:37:31.701240635 [ThreadId 16] - ideDispatcher: got request 7 with id: IdInt 1
2020-03-11 10:37:31.701340732 [ThreadId 16] - got prefix("","1")
2020-03-11 10:37:31.702046222 [ThreadId 16] - ideDispatcher: top of loop
2020-03-11 10:37:31.702823225 [ThreadId 5] - <--2--{"result":[{"insertText":"foldl1","kind":3,"data":{"name_details":["Data.Foldable","base","v","foldl1"],"hoogle_query":"foldl1 module:Prelude is:exact"},"insertTextFormat":2,"label":"foldl1","detail":"Prelude"},{"insertText":"foldr1","kind":3,"data":{"name_details":["Data.Foldable","base","v","foldr1"],"hoogle_query":"foldr1 module:Prelude is:exact"},"insertTextFormat":2,"label":"foldr1","detail":"Prelude"},{"insertText":"scanl1","kind":3,"data":{"name_details":["GHC.List","base","v","scanl1"],"hoogle_query":"scanl1 module:Prelude is:exact"},"insertTextFormat":2,"label":"scanl1","detail":"Prelude"},{"insertText":"scanr1","kind":3,"data":{"name_details":["GHC.List","base","v","scanr1"],"hoogle_query":"scanr1 module:Prelude is:exact"},"insertTextFormat":2,"label":"scanr1","detail":"Prelude"}],"jsonrpc":"2.0","id":1}
2020-03-11 10:37:31.991202197 [ThreadId 15] - ghcDispatcher:got request 6 with id: Nothing
2020-03-11 10:37:31.991276278 [ThreadId 15] - ghcDispatcher:Processing request as version matches
2020-03-11 10:37:31.991370056 [ThreadId 15] - Reusing cradle
2020-03-11 10:37:31.991872045 [ThreadId 15] - haskell-lsp:persistFileVFS: Writing virtual file: uri = NormalizedUri "file:///home/j/projects/bugs/reload/src/Foo.hs", virtual file = "/run/user/1000/haskell-lsp17296/Foo.hs-00002--4428135201160501691.hs"
2020-03-11 10:37:32.006606949 [ThreadId 6] - requestDiagnostics: no diagFunc for:DiagnosticOnChange
2020-03-11 10:37:32.09460107 [ThreadId 15] - ghcDispatcher: top of loop
2020-03-11 10:37:32.094665132 [ThreadId 15] - ghcDispatcher:got request 6 with id: Nothing
2020-03-11 10:37:32.094690143 [ThreadId 15] - ghcDispatcher:Processing request as version matches
2020-03-11 10:37:32.094757682 [ThreadId 15] - Reusing cradle
2020-03-11 10:37:32.094906796 [ThreadId 15] - setTypecheckedModule: before ghc-mod
2020-03-11 10:37:32.094933712 [ThreadId 15] - Loading file
2020-03-11 10:37:32.094962732 [ThreadId 15] - setTypecheckedModule: before ghc-mod
2020-03-11 10:37:32.094982801 [ThreadId 15] - Loading file
2020-03-11 10:37:32.096524728 [ThreadId 52] - setTargets: [("/home/j/projects/bugs/reload/src/Foo.hs","/run/user/1000/haskell-lsp17296/Foo.hs-00002--4428135201160501691.hs")]
2020-03-11 10:37:32.096823067 [ThreadId 52] - modGraph: [ModLocation {ml_hs_file = Just "/home/j/projects/bugs/reload/src/Bar.hs", ml_hi_file = "/home/j/.cache/hie-bios/d683979caa1268a99179ce7efe7042c9ecfe996c/Bar.hi", ml_obj_file = "/home/j/projects/bugs/reload/dist-newstyle/build/x86_64-linux/ghc-8.8.2/reload-0.0.0/build/Bar.o", ml_hie_file = "/home/j/projects/bugs/reload/dist-newstyle/build/x86_64-linux/ghc-8.8.2/reload-0.0.0/build/Bar.hie"},ModLocation {ml_hs_file = Just "/run/user/1000/haskell-lsp17296/Foo.hs-00002--4428135201160501691.hs", ml_hi_file = "/home/j/.cache/hie-bios/d683979caa1268a99179ce7efe7042c9ecfe996c/Foo.hi", ml_obj_file = "/home/j/projects/bugs/reload/dist-newstyle/build/x86_64-linux/ghc-8.8.2/reload-0.0.0/build/Foo.o", ml_hie_file = "/home/j/projects/bugs/reload/dist-newstyle/build/x86_64-linux/ghc-8.8.2/reload-0.0.0/build/Foo.hie"}]
2020-03-11 10:37:32.097226174 [ThreadId 52] - init-plugins(loaded):0
2020-03-11 10:37:32.097255061 [ThreadId 52] - init-plugins(specified):0
2020-03-11 10:37:32.099280315 [ThreadId 52] - srcSpan2Loc: mapped file is /run/user/1000/haskell-lsp17296/Foo.hs-00002--4428135201160501691.hs
2020-03-11 10:37:32.099714738 [ThreadId 52] - reverseMapFile: mapped file is /run/user/1000/haskell-lsp17296/Foo.hs-00002--4428135201160501691.hs
2020-03-11 10:37:32.099757974 [ThreadId 52] - reverseMapFile: original is /home/j/projects/bugs/reload/src/Foo.hs
2020-03-11 10:37:32.100494519 [ThreadId 52] - reverseMapFile: Canonicalized original is /home/j/projects/bugs/reload/src/Foo.hs
2020-03-11 10:37:32.100530658 [ThreadId 52] - srcSpan2Loc: Original file is /home/j/projects/bugs/reload/src/Foo.hs
2020-03-11 10:37:32.100556885 [ThreadId 52] - Diagnostics at Location: (RealSrcSpan SrcSpanOneLine "/run/user/1000/haskell-lsp17296/Foo.hs-00002--4428135201160501691.hs" 6 7 11,Right (Location {_uri = Uri {getUri = "file:///home/j/projects/bugs/reload/src/Foo.hs"}, _range = Range {_start = Position {_line = 5, _character = 6}, _end = Position {_line = 5, _character = 10}}}))
2020-03-11 10:37:32.100602664 [ThreadId 52] - Writing diag Diagnostic {_range = Range {_start = Position {_line = 5, _character = 6}, _end = Position {_line = 5, _character = 10}}, _severity = Just DsError, _code = Nothing, _source = Just "bios", _message = "\8226 Couldn't match expected type \8216Integer -> t\8217 with actual type \8216()\8217\n\8226 The function \8216()\8217 is applied to one argument,\n  but its type \8216()\8217 has none\n  In the expression: () 1\n  In an equation for \8216foo\8217: foo = () 1\n\8226 Relevant bindings include\n    foo :: t\n      (bound at /run/user/1000/haskell-lsp17296/Foo.hs-00002--4428135201160501691.hs:6:1)", _relatedInformation = Nothing}
2020-03-11 10:37:32.101162196 [ThreadId 52] - loaded /home/j/projects/bugs/reload/src/Foo.hs - /run/user/1000/haskell-lsp17296/Foo.hs-00002--4428135201160501691.hs
2020-03-11 10:37:32.10120897 [ThreadId 52] - Typechecked modules for: Just "/run/user/1000/haskell-lsp17296/Foo.hs-00002--4428135201160501691.hs"

2020-03-11 10:37:32.107944609 [ThreadId 15] - File, loaded
2020-03-11 10:37:32.108286077 [ThreadId 15] - setTypecheckedModule: after ghc-mod
2020-03-11 10:37:32.10831397 [ThreadId 15] - Diags: fromList [(NormalizedUri "file:///home/j/projects/bugs/reload/src/Foo.hs",fromList [Diagnostic {_range = Range {_start = Position {_line = 5, _character = 6}, _end = Position {_line = 5, _character = 10}}, _severity = Just DsError, _code = Nothing, _source = Just "bios", _message = "\8226 Couldn't match expected type \8216Integer -> t\8217 with actual type \8216()\8217\n\8226 The function \8216()\8217 is applied to one argument,\n  but its type \8216()\8217 has none\n  In the expression: () 1\n  In an equation for \8216foo\8217: foo = () 1\n\8226 Relevant bindings include\n    foo :: t\n      (bound at /run/user/1000/haskell-lsp17296/Foo.hs-00002--4428135201160501691.hs:6:1)", _relatedInformation = Nothing}])]
2020-03-11 10:37:32.108360833 [ThreadId 15] - setTypecheckedModule: Did get typechecked module for: "/home/j/projects/bugs/reload/src/Foo.hs"
2020-03-11 10:37:32.108515583 [ThreadId 15] - setTypecheckedModule: done
2020-03-11 10:37:32.108587039 [ThreadId 15] - Diags: [(NormalizedUri "file:///home/j/projects/bugs/reload/src/Foo.hs",[Diagnostic {_range = Range {_start = Position {_line = 5, _character = 6}, _end = Position {_line = 5, _character = 10}}, _severity = Just DsError, _code = Nothing, _source = Just "bios", _message = "\8226 Couldn't match expected type \8216Integer -> t\8217 with actual type \8216()\8217\n\8226 The function \8216()\8217 is applied to one argument,\n  but its type \8216()\8217 has none\n  In the expression: () 1\n  In an equation for \8216foo\8217: foo = () 1\n\8226 Relevant bindings include\n    foo :: t\n      (bound at /run/user/1000/haskell-lsp17296/Foo.hs-00002--4428135201160501691.hs:6:1)", _relatedInformation = Nothing}])]
2020-03-11 10:37:32.108633993 [ThreadId 15] - ghcDispatcher: top of loop
2020-03-11 10:37:32.140644454 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"uri":"file:///home/j/projects/bugs/reload/src/Foo.hs","diagnostics":[]},"method":"textDocument/publishDiagnostics"}
2020-03-11 10:37:32.140730671 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"token":2},"method":"window/workDoneProgress/create","id":2}
2020-03-11 10:37:32.140772046 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"begin","cancellable":false,"title":"loading","percentage":0},"token":2},"method":"$/progress"}
2020-03-11 10:37:32.14082864 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"report","percentage":0.5,"message":"Bar"},"token":2},"method":"$/progress"}
2020-03-11 10:37:32.140901552 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"report","percentage":1,"message":"Foo"},"token":2},"method":"$/progress"}
2020-03-11 10:37:32.14095176 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"value":{"kind":"end"},"token":2},"method":"$/progress"}
2020-03-11 10:37:32.141031568 [ThreadId 5] - <--2--{"jsonrpc":"2.0","params":{"uri":"file:///home/j/projects/bugs/reload/src/Foo.hs","diagnostics":[{"severity":1,"range":{"start":{"line":5,"character":6},"end":{"line":5,"character":10}},"source":"bios","message":"• Couldn't match expected type ‘Integer -> t’ with actual type ‘()’\n• The function ‘()’ is applied to one argument,\n  but its type ‘()’ has none\n  In the expression: () 1\n  In an equation for ‘foo’: foo = () 1\n• Relevant bindings include\n    foo :: t\n      (bound at /run/user/1000/haskell-lsp17296/Foo.hs-00002--4428135201160501691.hs:6:1)"}]},"method":"textDocument/publishDiagnostics"}
2020-03-11 10:37:32.141270398 [ThreadId 4] - ---> {"jsonrpc":"2.0","id":2,"result":null}
2020-03-11 10:37:32.14132034 [ThreadId 4] - haskell-lsp:Got reply message:"{\"jsonrpc\":\"2.0\",\"id\":2,\"result\":null}"
2020-03-11 10:37:32.141386393 [ThreadId 10] - ****** reactor: got message number:8
2020-03-11 10:37:32.141452094 [ThreadId 10] - reactor:got RspFromClient:ResponseMessage {_jsonrpc = "2.0", _id = IdRspInt 2, _result = Just Null, _error = Nothing}
2020-03-11 10:37:32.141480931 [ThreadId 10] - ****** reactor: top of loop
2020-03-11 10:37:32.376649982 [ThreadId 4] - ---> {"jsonrpc":"2.0","id":2,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///home/j/projects/bugs/reload/src/Foo.hs"},"position":{"line":5,"character":9}}}
2020-03-11 10:37:32.376825839 [ThreadId 10] - ****** reactor: got message number:9
2020-03-11 10:37:32.376868119 [ThreadId 10] - reactor:got DocumentHighlightsRequest:RequestMessage {_jsonrpc = "2.0", _id = IdInt 2, _method = TextDocumentDocumentHighlight, _params = TextDocumentPositionParams {_textDocument = TextDocumentIdentifier {_uri = Uri {getUri = "file:///home/j/projects/bugs/reload/src/Foo.hs"}}, _position = Position {_line = 5, _character = 9}, _workDoneToken = Nothing}}
2020-03-11 10:37:32.376909315 [ThreadId 10] - ****** reactor: top of loop
2020-03-11 10:37:32.376976778 [ThreadId 16] - ideDispatcher: got request 9 with id: IdInt 2
2020-03-11 10:37:32.377276792 [ThreadId 16] - ideDispatcher: top of loop
2020-03-11 10:37:32.37733009 [ThreadId 5] - <--2--{"result":[],"jsonrpc":"2.0","id":2}







<Finished processing edit>






2020-03-11 10:37:38.360485133 [ThreadId 4] - ---> {"jsonrpc":"2.0","id":3,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///home/j/projects/bugs/reload/src/Foo.hs"},"position":{"line":5,"character":9}}}
2020-03-11 10:37:38.360641643 [ThreadId 10] - ****** reactor: got message number:10
2020-03-11 10:37:38.360680788 [ThreadId 10] - reactor:got DocumentHighlightsRequest:RequestMessage {_jsonrpc = "2.0", _id = IdInt 3, _method = TextDocumentDocumentHighlight, _params = TextDocumentPositionParams {_textDocument = TextDocumentIdentifier {_uri = Uri {getUri = "file:///home/j/projects/bugs/reload/src/Foo.hs"}}, _position = Position {_line = 5, _character = 9}, _workDoneToken = Nothing}}
2020-03-11 10:37:38.360722247 [ThreadId 10] - ****** reactor: top of loop
2020-03-11 10:37:38.360777616 [ThreadId 16] - ideDispatcher: got request 10 with id: IdInt 3
2020-03-11 10:37:38.360896614 [ThreadId 16] - ideDispatcher: top of loop
2020-03-11 10:37:38.360947355 [ThreadId 5] - <--2--{"result":[],"jsonrpc":"2.0","id":3}
2020-03-11 10:37:38.769723553 [ThreadId 4] - ---> {"jsonrpc":"2.0","id":4,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///home/j/projects/bugs/reload/src/Foo.hs"},"position":{"line":5,"character":9}}}
2020-03-11 10:37:38.769882484 [ThreadId 10] - ****** reactor: got message number:11
2020-03-11 10:37:38.769962873 [ThreadId 10] - reactor:got DocumentHighlightsRequest:RequestMessage {_jsonrpc = "2.0", _id = IdInt 4, _method = TextDocumentDocumentHighlight, _params = TextDocumentPositionParams {_textDocument = TextDocumentIdentifier {_uri = Uri {getUri = "file:///home/j/projects/bugs/reload/src/Foo.hs"}}, _position = Position {_line = 5, _character = 9}, _workDoneToken = Nothing}}
2020-03-11 10:37:38.770109212 [ThreadId 10] - ****** reactor: top of loop
2020-03-11 10:37:38.770190143 [ThreadId 16] - ideDispatcher: got request 11 with id: IdInt 4
2020-03-11 10:37:38.770309416 [ThreadId 16] - ideDispatcher: top of loop
2020-03-11 10:37:38.770360746 [ThreadId 5] - <--2--{"result":[],"jsonrpc":"2.0","id":4}
2020-03-11 10:37:39.926764947 [ThreadId 4] - ---> {"jsonrpc":"2.0","method":"textDocument/didSave","params":{"textDocument":{"uri":"file:///home/j/projects/bugs/reload/src/Foo.hs","version":3}}}
2020-03-11 10:37:39.92690642 [ThreadId 10] - ****** reactor: got message number:12
2020-03-11 10:37:39.926949749 [ThreadId 10] - ****** reactor: processing NotDidSaveTextDocument
2020-03-11 10:37:39.926988056 [ThreadId 10] - requestDiagnostics: got diagFunc for:DiagnosticOnSave
2020-03-11 10:37:39.92701586 [ThreadId 10] - requestDiagnostics: calling diagFunc for plugin:PluginId "liquid"
2020-03-11 10:37:39.92705149 [ThreadId 10] - ****** reactor: top of loop
2020-03-11 10:37:39.927098268 [ThreadId 15] - ghcDispatcher:got request 12 with id: Nothing
2020-03-11 10:37:39.927145915 [ThreadId 15] - ghcDispatcher:Processing request as version matches
2020-03-11 10:37:39.927266899 [ThreadId 15] - Reusing cradle
2020-03-11 10:37:39.936614242 [ThreadId 4] - ---> {"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///home/j/projects/bugs/reload/src/Foo.hs"}}}
2020-03-11 10:37:39.936699842 [ThreadId 4] - Closed: Uri {getUri = "file:///home/j/projects/bugs/reload/src/Foo.hs"}
2020-03-11 10:37:39.956573132 [ThreadId 10] - ****** reactor: got message number:13
2020-03-11 10:37:39.95664006 [ThreadId 10] - ****** reactor: processing NotDidCloseTextDocument
2020-03-11 10:37:39.956680546 [ThreadId 10] - ****** reactor: top of loop
2020-03-11 10:37:39.965376448 [ThreadId 9] - Scheduler thread exited unexpectedly: hie-8.8.2: signal: 15
2020-03-11 10:37:39.96730104 [ThreadId 4] - 
haskell-lsp:Got EOF, exiting 1 ...

